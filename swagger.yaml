openapi: 3.0.0
info:
  title: Backend API
  version: '1.0'
servers:
  - url: 'http://localhost:3000'
paths:
  /products:
    post:
      summary: Create Product
      tags:
        - products
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
            application/xml:
              schema:
                type: object
                properties: {}
              examples: {}
        '422':
          $ref: '#/components/responses/Validation-failed'
      operationId: post-products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
        description: ''
    get:
      summary: Get products
      operationId: get-products
      tags:
        - products
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
              examples:
                Example:
                  items:
                    - id: 0
                      active: true
                      type: 1
                      supplierID: 0
                      name: HEM 1 Jaar
                      uspText: string
                      description: string
                      contractDuration: 0
                      allowedCustomerType: 10
                      allowedFuelType: 1
                      startDateType: 10
                      isBusiness: true
                      bagLimitation: true
                      switchWindowMinDays: 0
                      switchWindowsMaxDays: 0
                      validFrom: '2020-01-01'
                      validTill: '2021-01-01'
                      hasFineCompensation: true
                      fineCompensationText: string
                      energyType: 1
                      hasContractBreachFine: true
                      contractBreachFineText: string
                      maxEnergyEANCount: 0
                      maxGasEANCount: 0
                      minEnergyEANCount: 0
                      minGasEANCount: 0
  /flows:
    post:
      summary: Create Flow
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Flow'
            application/xml:
              schema:
                type: object
                properties: {}
              examples: {}
        '422':
          $ref: '#/components/responses/Validation-failed'
      operationId: post-flows
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Flow'
        description: ''
      tags:
        - flows
    get:
      summary: Get flows
      operationId: get-flows
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Flow'
              examples:
                Example:
                  items:
                    - id: 0
                      active: true
                      type: 1
                      supplierID: 0
                      name: HEM 1 Jaar
                      uspText: string
                      description: string
                      contractDuration: 0
                      allowedCustomerType: 10
                      allowedFuelType: 1
                      startDateType: 10
                      isBusiness: true
                      bagLimitation: true
                      switchWindowMinDays: 0
                      switchWindowsMaxDays: 0
                      validFrom: '2020-01-01'
                      validTill: '2021-01-01'
                      hasFineCompensation: true
                      fineCompensationText: string
                      energyType: 1
                      hasContractBreachFine: true
                      contractBreachFineText: string
                      maxEnergyEANCount: 0
                      maxGasEANCount: 0
                      minEnergyEANCount: 0
                      minGasEANCount: 0
        '':
          content:
            application/json:
              schema:
                type: object
                properties: {}
      tags:
        - flows
    parameters: []
  '/products/{productID}':
    get:
      summary: Get a specific product
      tags:
        - products
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
      operationId: get-product
      description: ''
    patch:
      summary: Edit a product
      operationId: patch-product
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '422':
          $ref: '#/components/responses/Validation-failed'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
        description: ''
      tags:
        - products
    parameters:
      - schema:
          type: string
        name: productID
        in: path
        required: true
  '/flows/{flowID}':
    get:
      summary: Get a specific flow
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Flow'
      operationId: get-flow
      description: ''
      tags:
        - flows
    patch:
      summary: Edit a flow
      operationId: patch-flow
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Flow'
        '422':
          $ref: '#/components/responses/Validation-failed'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Flow'
        description: ''
      tags:
        - flows
    parameters:
      - schema:
          type: string
        name: flowID
        in: path
        required: true
  /producttariffs:
    get:
      summary: Get product tariffs
      tags:
        - producttariffs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    oneOf:
                      - items:
                          $ref: '#/components/schemas/ProductTariffEnergy'
                    type: array
      operationId: get-producttariffs
    post:
      summary: Create a tariff
      operationId: post-producttariffs
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ProductTariffEnergy'
        '422':
          $ref: '#/components/responses/Validation-failed'
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/ProductTariffEnergy'
      tags:
        - producttariffs
  '/producttariff/{tariffID}':
    parameters:
      - schema:
          type: string
        name: tariffID
        in: path
        required: true
    patch:
      summary: Edit a tariff
      operationId: patch-producttariff-tariffID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ProductTariffEnergy'
        '422':
          $ref: '#/components/responses/Validation-failed'
      tags:
        - producttariffs
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/ProductTariffEnergy'
  /suppliers:
    get:
      summary: Get suppliers
      tags:
        - suppliers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Supplier'
      operationId: get-suppliers
    post:
      summary: Create a supplier
      operationId: post-suppliers
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
        '422':
          $ref: '#/components/responses/Validation-failed'
      tags:
        - suppliers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Supplier'
  '/suppliers/{supplierID}':
    parameters:
      - schema:
          type: string
        name: supplierID
        in: path
        required: true
    patch:
      summary: Edit a supplier
      operationId: patch-suppliers-supplierID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
        '422':
          $ref: '#/components/responses/Validation-failed'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Supplier'
      tags:
        - suppliers
  /energyflow/productcalculations:
    post:
      summary: Get draft calculation list
      tags:
        - energyflow
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    product:
                      $ref: '#/components/schemas/Product'
                    calculation:
                      $ref: '#/components/schemas/FlowProductCalculation'
                    chargingPointProduct:
                      $ref: '#/components/schemas/Product'
              examples: {}
      operationId: get-energyflow-draftcalculation
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                connections:
                  type: array
                  items:
                    $ref: '#/components/schemas/Ean'
                chargingPointProductID:
                  type: integer
                  minimum: 1
                  description: Only needed if the connections contain a charging point
                isBusiness:
                  type: boolean
                  default: false
              required:
                - connections
    parameters: []
  /energyflow/relation:
    post:
      summary: Find or create relation for energyflow
      tags:
        - energyflow
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  relationID:
                    type: integer
        '422':
          $ref: '#/components/responses/Validation-failed'
        '500':
          description: Internal Server Error (This will occur when creation in ECEDO fails)
      operationId: get-energyflow-relation
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                relation:
                  $ref: '#/components/schemas/Relation'
                productID:
                  type: integer
                  description: |
                    We will use this do determine the label (For later)
              required:
                - relation
                - productID
  /orders:
    get:
      summary: Get orders
      tags:
        - orders
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
      operationId: get-orders
    post:
      summary: Create order
      operationId: post-orders
      responses:
        '200':
          description: OK
      tags:
        - orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCreate'
  '/orders/{orderID}/draftcalculation':
    parameters:
      - schema:
          type: string
        name: orderID
        in: path
        required: true
    get:
      summary: Get draft calculation for a order
      tags:
        - orders
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FlowProductCalculation'
      operationId: get-orders-orderID-draftcalculation
      description: ''
  '/products/{productID}/sync':
    parameters:
      - schema:
          type: string
        name: productID
        in: path
        required: true
    post:
      summary: Request product sync
      tags:
        - products
      responses:
        '200':
          description: OK
        '404':
          description: Not Found
      operationId: get-products-productID-sync
      description: This will create a product sync job
  '/orders/{orderID}/activity':
    parameters:
      - schema:
          type: string
        name: orderID
        in: path
        required: true
    get:
      summary: Get order activity
      tags: []
      responses: {}
      operationId: get-orders-orderID-activity
  '/orders/{orderID}/{eanID}/activity':
    parameters:
      - schema:
          type: string
        name: orderID
        in: path
        required: true
      - schema:
          type: string
        name: eanID
        in: path
        required: true
    get:
      summary: Get EAN activity
      tags: []
      responses: {}
      operationId: get-orders-orderID-eanID-activity
      description: ''
  /productfiles:
    get:
      summary: Get productfiles
      tags:
        - productfiles
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProductFile'
      operationId: get-productfiles
      parameters:
        - schema:
            type: integer
          in: query
          name: productID
    parameters: []
    post:
      summary: Create productfile
      operationId: post-productfiles-productID
      responses:
        '200':
          description: OK
      tags:
        - productfiles
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductFile'
components:
  schemas:
    Product:
      description: ''
      type: object
      x-examples:
        example-1:
          id: 1
          active: 1
          type: 'NULL'
          supplierID: 'NULL'
          name: Awesems-energy Stroom en Aardgas 3 jr
          uspText: 'NULL'
          description: Awesems-energy Stroom en Aardgas 3 jr
          contractDuration: 'NULL'
          allowedCustomerType: 'NULL'
          allowedFuelType: 'NULL'
          startDateType: 'NULL'
          isBusiness: 0
          isSohoProposition: 'NULL'
          bagLimitationType: 'NULL'
          switchWindowMinDays: 'NULL'
          switchWindowsMaxDays: 'NULL'
          defaultSwitchWindowDays: 'NULL'
          validFrom: 'NULL'
          validTill: 'NULL'
          hasFineCompensation: 'NULL'
          fineCompensationText: 'NULL'
          electricityType: 'NULL'
          gasType: 'NULL'
          loyaltyBonusText: 'NULL'
          reflectionPeriodText: 'NULL'
          cashBackText: 'NULL'
          tariffType: 'NULL'
          hasContractBreachFine: 'NULL'
          contractBreachFineText: 'NULL'
          ecedoElectricityPropositionSuffix: 'NULL'
          ecedoGasPropositionSuffix: 'NULL'
          ecedoElectricityMeeliftPropositionUUID: 43f56ed7-3a14-43a5-a513-ac1600faa078
          ecedoGasMeeliftPropositionUUID: b84a46d8-5e99-4dd0-a0d3-ac1600fb1b90
          isChargingPointProposition: 0
          singleFuelAllowed: 0
      title: Product
      properties:
        id:
          type: integer
        active:
          type: boolean
        type:
          type: string
          minLength: 1
          enum:
            - ELECTRICITY
            - GAS
            - DUAL
        supplierID:
          type: integer
        name:
          type: string
          minLength: 1
        uspText:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
        contractDuration:
          type: integer
          description: |
            In months
        allowedCustomerType:
          type: string
          minLength: 1
        allowedFuelType:
          type: string
          minLength: 1
        startDateType:
          type: string
          minLength: 1
        isBusiness:
          type: boolean
        isSohoProposition:
          type: boolean
        bagLimitationType:
          type: string
        switchWindowMinDays:
          type: integer
        switchWindowsMaxDays:
          type: integer
        defaultSwitchWindowDays:
          type: integer
        validFrom:
          type: string
          minLength: 1
          format: date
        validTill:
          type: string
          minLength: 1
          format: date
        hasFineCompensation:
          type: boolean
        fineCompensationText:
          type: string
          minLength: 1
        electricityType:
          type: string
          minLength: 1
        gasType:
          type: string
          minLength: 1
        loyaltyBonusText:
          type: string
          minLength: 1
        reflectionPeriodText:
          type: string
          minLength: 1
        cashBackText:
          type: string
          minLength: 1
        tariffType:
          type: string
          minLength: 1
        hasContractBreachFine:
          type: boolean
        contractBreachFineText:
          type: string
          minLength: 1
        ecedoElectricityPropositionSuffix:
          type: string
          minLength: 1
        ecedoGasPropositionSuffix:
          type: string
          minLength: 1
        ecedoElectricityMeeliftPropositionReference:
          type: string
          minLength: 1
          format: uuid
        ecedoGasMeeliftPropositionReference:
          type: string
          minLength: 1
          format: uuid
        isChargingPointProposition:
          type: boolean
        singleFuelAllowed:
          type: boolean
        hasCoolingDownPeriod:
          type: boolean
      required:
        - id
        - active
        - type
        - supplierID
        - name
        - uspText
        - description
        - contractDuration
        - allowedCustomerType
        - allowedFuelType
        - startDateType
        - isBusiness
        - isSohoProposition
        - bagLimitationType
        - switchWindowMinDays
        - switchWindowsMaxDays
        - defaultSwitchWindowDays
        - validFrom
        - validTill
        - hasFineCompensation
        - fineCompensationText
        - electricityType
        - gasType
        - loyaltyBonusText
        - reflectionPeriodText
        - cashBackText
        - tariffType
        - hasContractBreachFine
        - contractBreachFineText
        - ecedoElectricityPropositionSuffix
        - ecedoGasPropositionSuffix
        - ecedoElectricityMeeliftPropositionReference
        - ecedoGasMeeliftPropositionReference
        - isChargingPointProposition
        - singleFuelAllowed
    ProductTariffEnergy:
      description: ''
      type: object
      x-examples:
        example-1:
          id: 1
          productID: 'NULL'
          active: 'NULL'
          createTimestamp: 'NULL'
          validFrom: 'NULL'
          validTill: 'NULL'
          tariffSingle: 'NULL'
          tariffHigh: 'NULL'
          tariffLow: 'NULL'
          tariffGas1: 'NULL'
          tariffGas2: 'NULL'
          tariffReturnHigh: 'NULL'
          tariffReturnLow: 'NULL'
          tariffReturnSingle: 'NULL'
          tariffFixedEnergy: 'NULL'
          tariffFixedGas: 'NULL'
      title: Energy Tariff
      x-tags:
        - producttariffs
      properties:
        id:
          type: integer
          minimum: 1
        productID:
          type: integer
          minimum: 1
          maximum: 10000
        active:
          type: boolean
        createTimestamp:
          type: string
          minLength: 1
          format: date-time
        validFrom:
          type: string
          minLength: 1
          format: date
        validTill:
          type: string
          minLength: 1
          format: date
        tariffSingle:
          type: number
        tariffHigh:
          type: number
        tariffLow:
          type: number
        tariffGas1:
          type: number
        tariffGas2:
          type: number
        tariffReturnHigh:
          type: number
        tariffReturnLow:
          type: number
        tariffReturnSingle:
          type: number
        tariffFixedEnergy:
          type: number
        tariffFixedGas:
          type: number
        ecedoElectricityPropositionReference:
          type: string
          format: uuid
        ecedoGasPropositionReference:
          type: string
          format: uuid
      required:
        - id
        - productID
        - active
        - createTimestamp
        - validFrom
        - validTill
        - tariffSingle
        - tariffHigh
        - tariffLow
        - tariffGas1
        - tariffGas2
        - tariffReturnHigh
        - tariffReturnLow
        - tariffReturnSingle
        - tariffFixedEnergy
        - tariffFixedGas
    Supplier:
      description: ''
      type: object
      x-examples:
        example-1:
          id: 1
          type: 'NULL'
          name: 'NULL'
          description: 'NULL'
          logoFileID: 'NULL'
      title: Supplier
      x-tags:
        - suppliers
      properties:
        id:
          type: integer
          minimum: 1
        type:
          type: integer
          enum:
            - 1
        name:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
        logoFileID:
          type: string
          minLength: 1
          format: uuid
        ecedoLabelUUID:
          type: string
          format: uuid
        ecedoSupplierEAN:
          type: string
        colorHexCode:
          type: string
        email:
          type: string
          format: email
        senderEmail:
          type: string
          format: email
        street:
          type: string
        houseNumber:
          type: string
        houseNumberAddition:
          type: string
        postalCode:
          type: string
        city:
          type: string
        cocNumber:
          type: string
        phoneNumber:
          type: string
        '':
          type: string
      required:
        - id
        - type
        - name
        - description
        - logoFileID
    Flow:
      title: Flow
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        name:
          type: string
        productCategoryID:
          type: integer
          minimum: 1
          deprecated: true
        canOfferEmail:
          type: boolean
        canSignSignature:
          type: boolean
        icon:
          type: string
    Ean:
      description: ''
      type: object
      x-examples:
        example-1:
          id: null
          type: EAN
          marketSegment: ELECTRICITY
          usageType: SMALLCONSUMER
          ean: '871689290300654974'
          chargingPointID: null
          postalCode: 3073AS
          houseNumber: 56
          houseNumberAddition: ''
          street: Sandelingstraat
          city: ROTTERDAM
          gridOperator: Stedin
          gridOperatorEAN: '8716892000005'
          gridAreaEAN: '871689200000010161'
          isSecondaryAllocation: false
          residenceFunction: ''
          bagPurpose: ''
          profile: ''
          meterType: ''
          capacity: ''
          usageElectricityHigh: 0
          usageElectricityLow: 0
          usageElectricitySingle: 0
          usageGas: 0
          returnElectricityHigh: 0
          returnElectricityLow: 0
          returnElectricitySingle: 0
      title: Ean
      examples:
        - id: 0
          type: EAN
          marketSegment: ELECTRICITY
          usageType: SMALLCONSUMER
          ean: string
          chargingPointID: string
          postalCode: string
          houseNumber: 0
          houseNumberAddition: string
          street: string
          city: string
          gridOperator: string
          gridOperatorEAN: string
          gridAreaEAN: string
          isSecondaryAllocation: true
          isResidenceFunction: true
          isChargingPoint: false
          bagPurpose: string
          profile: string
          meterType: string
          capacityCode: string
          usageElectricityHigh: 0
          usageElectricityLow: 0
          usageElectricitySingle: 0
          usageGas: 0
          returnElectricityHigh: 0
          returnElectricityLow: 0
          returnElectricitySingle: 0
        - type: EAN
          marketSegment: ELECTRICITY
          usageType: SMALLCONSUMER
          ean: string
          chargingPointID: string
          postalCode: string
          houseNumber: 0
          houseNumberAddition: string
          street: string
          city: string
          isResidenceFunction: true
          isChargingPoint: false
          profile: Do not use for now!
          meterType: string
          capacityCode: string
          usageElectricityHigh: 0
          usageElectricityLow: 0
          usageElectricitySingle: 0
          usageGas: 0
          returnElectricityHigh: 0
          returnElectricityLow: 0
          returnElectricitySingle: 0
      properties:
        id:
          type: integer
          description: Assigned in backend
        type:
          type: string
          minLength: 1
          enum:
            - EAN
            - CHARGINGPOINT
          description: CHARGINGPOINT type is een virtuele EAN
        marketSegment:
          type: string
          minLength: 1
          enum:
            - ELECTRICITY
            - GAS
        usageType:
          type: string
          minLength: 1
          enum:
            - SMALLCONSUMER
            - LARGECONSUMER
            - ARTICLE
        ean:
          type: string
          minLength: 1
        chargingPointID:
          type: string
        postalCode:
          type: string
          minLength: 1
        houseNumber:
          type: number
        houseNumberAddition:
          type: string
        street:
          type: string
          minLength: 1
        city:
          type: string
          minLength: 1
        gridOperator:
          type: string
          minLength: 1
          readOnly: true
        gridOperatorEAN:
          type: string
          minLength: 1
          readOnly: true
        gridAreaEAN:
          type: string
          minLength: 1
          readOnly: true
        isSecondaryAllocation:
          type: boolean
        isResidenceFunction:
          type: boolean
        isChargingPoint:
          type: boolean
          default: false
        bagPurpose:
          type: string
          readOnly: true
        profile:
          type: string
          readOnly: true
        meterType:
          type: string
          enum:
            - SINGLE
            - DOUBLE
        capacityCode:
          type: string
        usageElectricityHigh:
          type: integer
        usageElectricityLow:
          type: integer
        usageElectricitySingle:
          type: integer
        usageGas:
          type: integer
        returnElectricityHigh:
          type: integer
        returnElectricityLow:
          type: integer
        returnElectricitySingle:
          type: integer
        switchType:
          type: string
          enum:
            - SWITCH
            - MOVEIN
        orderID:
          type: integer
          minimum: 1
        ecedoConnectionUUID:
          type: string
          format: uuid
          readOnly: true
        ecedoContractUUID:
          type: string
          format: uuid
          readOnly: true
        status:
          type: string
        startDate:
          type: string
          format: date
        isOriginal:
          type: boolean
        description:
          type: string
      required:
        - type
        - marketSegment
        - usageType
        - ean
        - postalCode
        - houseNumber
        - houseNumberAddition
        - street
        - city
        - isResidenceFunction
        - isChargingPoint
        - bagPurpose
        - meterType
        - capacityCode
        - usageElectricityHigh
        - usageElectricityLow
        - usageElectricitySingle
        - usageGas
        - returnElectricityHigh
        - returnElectricityLow
        - returnElectricitySingle
    FlowProductCalculation:
      description: ''
      type: object
      x-examples:
        example-1:
          summary:
            - ean: '871689290300654974'
              marketSegment: ELECTRICITY
              amount: 40
          calculation:
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Opslag duurzame energie
              vatPercentage: 21
              rangeStart: 0
              rangeEnd: 10000
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0273
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Energiebelasting
              vatPercentage: 21
              rangeStart: 0
              rangeEnd: 10000
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0977
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Vastrecht
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: 5.75
              amount: 5.75
              vatAmount: 1.21
              totalAmount: 6.96
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Laag
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0355
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Heffingskorting
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: -36.306667
              amount: -36.31
              vatAmount: -7.63
              totalAmount: -43.94
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Netwerkkosten
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: 61.973794
              amount: 61.97
              vatAmount: 13.01
              totalAmount: 74.98
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Hoog
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0472
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Afronding
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: null
              priceUnit: null
              price: null
              amount: 1.65
              vatAmount: 0.35
              totalAmount: 2
      title: FlowProductCalculation
      examples:
        - summary:
            - ean: '871689290300654974'
              marketSegment: ELECTRICITY
              amount: 40
            - ean: '871689290302337899'
              marketSegment: GAS
              amount: 20
          calculationRows:
            - componentCategory: Gas kleinverbruik
              componentGroup: Energielevering
              componentType: Opslag duurzame energie
              vatPercentage: 21
              rangeStart: 0
              rangeEnd: 170000
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: m3
              price: 0.0775
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Gas kleinverbruik
              componentGroup: Energielevering
              componentType: Energiebelasting
              vatPercentage: 21
              rangeStart: 0
              rangeEnd: 170000
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: m3
              price: 0.33307
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Gas kleinverbruik
              componentGroup: Energielevering
              componentType: Vastrecht
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: 5.75
              amount: 5.75
              vatAmount: 1.21
              totalAmount: 6.96
            - componentCategory: Gas kleinverbruik
              componentGroup: Energielevering
              componentType: Netwerkkosten
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: 8.373356
              amount: 8.37
              vatAmount: 1.76
              totalAmount: 10.13
            - componentCategory: Gas kleinverbruik
              componentGroup: Energielevering
              componentType: Enkel
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: m3
              price: 0.2069
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Opslag duurzame energie
              vatPercentage: 21
              rangeStart: 0
              rangeEnd: 10000
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0273
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Energiebelasting
              vatPercentage: 21
              rangeStart: 0
              rangeEnd: 10000
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0977
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Vastrecht
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: 5.75
              amount: 5.75
              vatAmount: 1.21
              totalAmount: 6.96
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Laag
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0355
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Heffingskorting
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: -36.306667
              amount: -36.31
              vatAmount: -7.63
              totalAmount: -43.94
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Netwerkkosten
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 1
              priceUnit: Maand
              price: 61.973794
              amount: 61.97
              vatAmount: 13.01
              totalAmount: 74.98
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Hoog
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: 0
              priceUnit: kWh
              price: 0.0472
              amount: 0
              vatAmount: 0
              totalAmount: 0
            - componentCategory: Gas kleinverbruik
              componentGroup: Energielevering
              componentType: Afronding
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: null
              priceUnit: null
              price: null
              amount: 2.4
              vatAmount: 0.51
              totalAmount: 2.91
            - componentCategory: Elektriciteit kleinverbruik
              componentGroup: Energielevering
              componentType: Afronding
              vatPercentage: 21
              rangeStart: null
              rangeEnd: null
              startDate: '2021-11-01'
              endDate: '2021-12-01'
              usage: null
              priceUnit: null
              price: null
              amount: 1.65
              vatAmount: 0.35
              totalAmount: 2
      properties:
        summary:
          type: array
          uniqueItems: true
          minItems: 1
          items:
            type: object
            properties:
              ean:
                type: string
                minLength: 1
              marketSegment:
                type: string
                minLength: 1
              amount:
                type: number
            required:
              - ean
              - marketSegment
              - amount
        calculationRows:
          type: array
          uniqueItems: true
          minItems: 1
          items:
            $ref: '#/components/schemas/DraftCalculationRow'
      required:
        - summary
        - calculationRows
    ProductBillingItem:
      title: ProductBillingItem
      type: object
      properties:
        id:
          type: integer
        ecedoUUID:
          type: string
          format: uuid
        name:
          type: string
        applyAfterDays:
          type: integer
          minimum: 1
    Company:
      description: ''
      type: object
      properties:
        id:
          type: number
        active:
          type: number
        name:
          type: string
          minLength: 1
        createTimestamp:
          type: string
          minLength: 1
        street:
          type: string
          minLength: 1
        houseNumber:
          type: number
        houseNumberAddition:
          type: string
          minLength: 1
        postalCode:
          type: string
          minLength: 1
        city:
          type: string
          minLength: 1
        email:
          type: string
          minLength: 1
        cocNumber:
          type: string
          minLength: 1
        website:
          type: string
          minLength: 1
        phoneNumber:
          type: string
          minLength: 1
        type:
          type: number
        parentCompanyID:
          type: string
          minLength: 1
      required:
        - id
        - active
        - name
        - createTimestamp
        - street
        - houseNumber
        - houseNumberAddition
        - postalCode
        - city
        - email
        - cocNumber
        - website
        - phoneNumber
        - type
        - parentCompanyID
      x-examples:
        example-1:
          id: 1
          active: 1
          name: Awesems-energy
          createTimestamp: '2021-09-07 15:56:18'
          street: Teststraat
          houseNumber: 250
          houseNumberAddition: 'NULL'
          postalCode: 'NULL'
          city: Amsterdam
          email: klantenservice@awesems-energy.nl
          cocNumber: 'NULL'
          website: 'NULL'
          phoneNumber: '01012345678'
          type: 1
          parentCompanyID: 'NULL'
    CompanyAllowedFlow:
      title: CompanyAllowedFlow
      type: object
      properties:
        companyID:
          type: integer
        flowID:
          type: integer
    CompanyAllowedProduct:
      title: CompanyAllowedProduct
      type: object
      properties:
        companyID:
          type: integer
        productID:
          type: integer
    Relation:
      description: ''
      type: object
      x-examples:
        example-1:
          id: 1
          ecedoUUID: 2eea09fd-5558-4b72-aef4-adba010ad981
          type: 1
          gender: m
          firstName: Zain
          middleName: 'NULL'
          lastName: Bouziane
          birthDate: '2001-04-25'
          phoneNumber: '0618582503'
          mobileNumber: '0618582503'
          email: zain@codiq.nl
          companyName: 'NULL'
          companyCocNumber: 'NULL'
          street: Sandelingstraat
          houseNumber: 56
          houseNumberAddition: 'NULL'
          postalCode: 3073AS
          city: Rotterdam
          paymentMethod: AUTOMATICCOLLECTION
          debtorName: Zain Bouziane
          bankAccountType: Bank
          bankAccountNumber: NL37RABO7123425928
          mandateTimestamp: '2021-10-07 11:08:25'
      properties:
        id:
          type: integer
          minimum: 1
        ecedoUUID:
          type: string
          minLength: 1
          format: uuid
        type:
          type: number
        gender:
          type: string
          minLength: 1
          enum:
            - m
            - f
        firstName:
          type: string
          minLength: 1
        middleName:
          type: string
          minLength: 1
        lastName:
          type: string
          minLength: 1
        birthDate:
          type: string
          minLength: 1
        phoneNumber:
          type: string
          minLength: 1
        mobileNumber:
          type: string
          minLength: 1
        email:
          type: string
          minLength: 1
        companyName:
          type: string
          minLength: 1
        companyCocNumber:
          type: string
          minLength: 1
        street:
          type: string
          minLength: 1
        houseNumber:
          type: integer
        houseNumberAddition:
          type: string
          minLength: 1
        postalCode:
          type: string
          minLength: 1
        city:
          type: string
          minLength: 1
        paymentMethod:
          type: string
          minLength: 1
        debtorName:
          type: string
          minLength: 1
        bankAccountType:
          type: string
          minLength: 1
          enum:
            - IBAN
        bankAccountNumber:
          type: string
          minLength: 1
        mandateTimestamp:
          type: string
          minLength: 1
          readOnly: true
      required:
        - id
        - ecedoUUID
        - type
        - gender
        - firstName
        - middleName
        - lastName
        - birthDate
        - phoneNumber
        - mobileNumber
        - email
        - companyName
        - companyCocNumber
        - street
        - houseNumber
        - houseNumberAddition
        - postalCode
        - city
        - paymentMethod
        - debtorName
        - bankAccountType
        - bankAccountNumber
        - mandateTimestamp
      title: Relation
      x-tags:
        - relations
    OrderCreate:
      title: OrderCreate
      type: object
      x-tags:
        - orders
      properties:
        productID:
          type: integer
        chargingPointProductID:
          type: integer
          description: |
            Only required when a connection contains a charging point
        relationID:
          type: integer
        connections:
          type: array
          items:
            $ref: '#/components/schemas/Ean'
        flowID:
          type: integer
        signatureSVG:
          type: string
          description: Required of signType === SIGNATURE
        signType:
          type: string
          enum:
            - EMAIL
            - SIGNATURE
      required:
        - productID
        - relationID
        - connections
        - flowID
        - signType
    Order:
      title: Order
      type: object
      properties:
        id:
          type: integer
        connections:
          type: array
          items:
            $ref: '#/components/schemas/Ean'
        product:
          $ref: '#/components/schemas/Product'
        tariff:
          $ref: '#/components/schemas/ProductTariffEnergy'
        relation:
          $ref: '#/components/schemas/Relation'
      x-tags:
        - orders
    DraftCalculationRow:
      title: DraftCalculationRow
      type: object
      description: ''
      properties:
        componentCategory:
          type: string
          minLength: 1
        componentGroup:
          type: string
          minLength: 1
        componentType:
          type: string
          minLength: 1
        vatPercentage:
          type: number
        rangeStart:
          type: number
        rangeEnd:
          type: number
        startDate:
          type: string
          minLength: 1
        endDate:
          type: string
          minLength: 1
        usage:
          type: number
        priceUnit:
          type: string
          minLength: 1
        price:
          type: number
        amount:
          type: number
        vatAmount:
          type: number
        totalAmount:
          type: number
      required:
        - componentCategory
        - componentGroup
        - componentType
        - vatPercentage
        - rangeStart
        - rangeEnd
        - startDate
        - endDate
        - usage
        - priceUnit
        - price
        - amount
        - vatAmount
        - totalAmount
    ProductFile:
      title: ProductFile
      type: object
      properties:
        id:
          type: integer
        fileID:
          type: string
        description:
          type: string
        type:
          type: string
          enum:
            - PRODUCTPOLICY
            - TERMSANDCONDITIONS
            - BONUSPOLICY
            - COMPENSATIONPOLICY
            - REVOCATIONFORM
            - OTHER
        productID:
          type: integer
  securitySchemes: {}
  responses:
    Validation-failed:
      description: Validation failed
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                default: false
              data:
                type: array
                items:
                  type: object
                  properties:
                    field:
                      type: string
                      example: name
                    message:
                      type: string
                      example: name cannot be blank
          examples:
            Example:
              success: false
              data:
                - field: name
                  message: name cannot be blank
      headers: {}
